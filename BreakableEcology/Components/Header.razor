@inject IJSRuntime js

<header class=@cssClass>
    <Container>
        <Logo Title="Breakably Ecology" />
        <Burger OnClick="ToggleHeaderState" @ref=burger />
        <Account />
        <Search />
        <Menu />
        <Telephone Theme="ThemeType.Dark" />
    </Container>
</header>

@code {
    private string cssClass = "header";
    private DotNetObjectReference<Header>? objRef;

    Burger? burger;

    [JSInvokable]
    public void ToggleHeaderState()
    {
        cssClass = (cssClass.Contains("active")) ? "header" : "header active";
        burger?.ToggleBurger();
    }

    [JSInvokable]
    public void Refresh(){
        StateHasChanged();
    }

    protected override async Task OnAfterRenderAsync(bool firstRender)
    {
        if (firstRender)
        {
            objRef = DotNetObjectReference.Create(this);
            await js.InvokeVoidAsync("setHeader", objRef);
        }
    }
}
